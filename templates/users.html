<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users - MovieWeb App</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500&display=swap" rel="stylesheet">
    <style>
    body {
        background-color: #2C2C2C;
        font-family: 'Quicksand', sans-serif;
        color: #EAEAEA;
        text-align: center;
        margin: 0;
        padding: 20px;
    }
    h1 {
        font-family: 'Quicksand', sans-serif;
        font-size: 2.5rem;
        color: #EAEAEA;
        margin-bottom: 30px;
        text-transform: uppercase;
        letter-spacing: 2px;
        border-bottom: 2px solid #FF6F61;
        display: inline-block;
        padding-bottom: 5px;
    }
    ul {
        list-style-type: none; /* Remove bullet points */
        padding: 0;
        max-width: 600px;
        margin: 0 auto;
    }
    li {
        background-color: #3A3A3A;
        border: 1px solid #555;
        margin: 15px 0;
        padding: 15px;
        transition: background-color 0.3s, transform 0.3s; /* Smooth hover effect */
    }
    li:hover {
        transform: translateY(-5px); /* Subtle lift on hover */
        background-color: #444;
    }
    a {
        text-decoration: none;
        color: #FF6F61; /* Accent color for links */
        font-weight: 500;
        font-size: 1.2rem;
        transition: color 0.3s;
    }
    a:hover {
        color: #FFD700;
    }
    </style>

    <script>
        // JavaScript function to confirm movie deletion
        function confirmDeletion(movieId) {
            const confirmation = confirm("Are you sure you want to delete this movie?");
            if (confirmation) {
                // If confirmed, submit the delete form
                document.getElementById('delete-form-' + movieId).submit();
            }
        }
    </script>

</head>
<body>
    <h1>users of the MoviWeb App:</h1>

    <div>
        <!-- Links to other pages -->
        <a href="{{ url_for('add_user') }}">to add user press here</a> <br>
        <a href="{{ url_for('list_movies') }}"> to the movies of the MoviWeb App</a>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="flash-messages">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    {% endwith %}

    <!-- List of Users -->
    {% if users %}
        <ul>
            {% for user in users %}
            <li>
                <!-- Display user's details -->
                <a href="/users/{{ user.user_id }}">{{ user.user_name }}</a> <br>

                <!-- Actions related to a specific user -->
                <a href="{{ url_for('add_new_movie_to_user', user_id=user.user_id) }}">add new movie to your fav list</a><br>
                <a href="{{ url_for('add_existing_movie_to_user', user_id=user.user_id) }}">add existing movie to your fav list</a><br>

                <!-- Delete Button with confirmation -->
                <form id="delete-form-{{ user.user_id }}" action="{{ url_for('delete_user', user_id=user.user_id) }}" method="POST" style="display: inline;">
                    <button type="button" onclick="confirmDeletion({{ user.user_id }})">delete</button>
                </form>


            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>no users found in dataBase</p>
    {% endif %}
</body>
</html>